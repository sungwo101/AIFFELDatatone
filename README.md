# AIFFEL Datatone
## 데이콘 : 전력사용량 예측 AI 경진대회 데이터를 이용하여 분석 [[Link]](https://dacon.io/competitions/official/235736/overview/description)

### code description
cluster.ipynb : 건물 유형과 특성이 예측에 미치는 영향에 대한 분석  
data.ipynb : 태양광과 비전력 냉방기가 전력 사용량에 미치는 영향 분석  
energy : 학습 데이터가 포함된 폴더  

### 1. 프로젝트 개요
- 전력 수요 예측에 있어 건물의 특징이 예측에 주는 영향과 비전력 냉각, 태양력 발전의 효과 분석  

### 2. 데이터 소개

- train 데이터 : 60개 건물들의 2020년 6월 1일 부터 2020년 8월 24일까지의 데이터
- 1시간 단위로 제공
- 전력사용량(kWh) 포함

### 3. 가설 검증

#### 가설 1 : 건물의 용도와 특징이 수요 예측의 중요한 변수 일 것이다.

##### EDA통한 가설 검증

##### 시각화

목적 : 건물 별로의 특징의 차이를 확인

- 전력 사용 분류
- 각 건물 별 target과 feature 사이에 상관 관계
- 용도 분류를 위한 요일 및 사용 시간 별 전력 사용량
- 
##### 군집화

군집 생성 Feature : 

1. 요일 및 사용 시간 3시간 단위 전력 사용량 : 건물의 용도
2. 전력 사용량에 대한 각 건물 별 Feature의 상관 관계 : 건물의 재질, 건물의 특징
3. 태양광 발전과 비전력 냉각 장치의 유무 : 주어진 건물에 대한 정보 

- **Cluster 시각화 : hierarchical clustering**
    - 건물의 경우 용도가 계층적이라고 생각하여 이를 계층적으로 군집화진행
      ![Untitled](https://github.com/sungwo101/Aiffel_minitone/assets/74895635/fff45f81-c3a1-47be-8296-a260b95df832)
        
- **시간과 요일에 따른 cluster 별 전기 수요량**
   ![Untitled (1)](https://github.com/sungwo101/Aiffel_minitone/assets/74895635/72d8c8b9-6bfb-4bd6-99e3-32b3faadd072)
    1. 평일과 약간에 새벽에 전력을 쓰는 경향 
    2. 평일에 9~18 ,주말에도 9~18이나 주말보다는 평일에 좀 더 많이 전력을 쓰는 경향  
    3. 저녁 시간과 주말에 더 많은 전기를 사용하는 경향
    4. 평일 9~18 주말에는 쉬는 경향 
    

- **군집 별 기상 요인에 따른 상관 관계**
   ![Untitled (2)](https://github.com/sungwo101/Aiffel_minitone/assets/74895635/4b00fb6d-4346-43cb-9bb9-b286afb89eef)
    

##### 모델을 통한 가설 검증

건물의 용도와 특징이 

1. 요일과 시간에 따른 전력량을 통해 건물 유형을 군집화  → 건물의 유형을 분류
2. 군집화된 유형 별 데이터를 분석 
3. 모델 학습 및 분석
- 군집 유형을 제외한 모델과 군집 유형을 추가한 모델의 학습 결과
    
    군집화를 통한 건물 유형이 어느 정도의 성능 차이를 보이는 지를 통해 건물 유형의 중요성 수치화 및 시각화 
    
    - 성능 비교
        
        
        | 모델 | 성능 |
        | --- | --- |
        | 전체 | 26.15 |
        | 군집 | 21.26 |
        | 건물별 | 4.64 |
    - **결과분석 시각화 2 : 각 건물별 cluster별 변수 중요도**
       ![Untitled (3)](https://github.com/sungwo101/Aiffel_minitone/assets/74895635/3e75f912-fed7-4b73-812a-43218b645e34)
        

##### 결론

전력의 수요 예측을 위해서는 시간적 요인과 기후적 요인의 중요성도 높지만 건물에 대한 정보가 중요하다는 것을 확인

### 가설 2 :  태양광 발전은 전기 사용량 감소의 효과가 있다.

#### EDA를 통한 가설 검증

##### 시각화

- **태양광을 보유하고 있는 건물의 일조량(전일 일조량+금일 일조량)과 전력사용량**
    
    특정 건물에서 일조량과 전력사용량의 반비례 관계를 확인함
    
- **일조량의 기준을 2대8(파레토법칙)로 나뉜 후 평균 전력사용량 비교(청색 : 일조량 0.8이상, 황색 0.8미만)**
    
    → 추측과 다르게 대부분의 건물들이 일조량이 많은 날에 전력을 많이 사용한 것으로 판단됨
    

##### 상관 관계 분석

- **건물 군집간, 태양광 발전기 보유 여부간, 일일 평균 일조량의 상관 관계**
    
    ![Untitled (4)](https://github.com/sungwo101/Aiffel_minitone/assets/74895635/1994b02f-ae0c-4c83-a27c-0adc5d9d4691)
    
- **분석 : cluster별 → 태양광 발전기 보유 여부 별 → 온도별 전력 사용량의 변화치를 LinearRegression을 사용하여 확인**
    
    → 가설이 맞다면 태양광 발전기를 보유하고 있는 건물의 변화치가 보유하고 있지 않은 건물의 변화치 보다 완만할 것으로 예상
    
    - 평일 주말 데이터를 모두다 사용
        
        ![Untitled (5)](https://github.com/sungwo101/Aiffel_minitone/assets/74895635/a47e7070-879c-49f6-8342-b28368209281)
        
    - 평일의 데이터만 사용(주말과 평일의 전력사용량의 차이가 큰 건물들도 있기에)
        
       ![Untitled (6)](https://github.com/sungwo101/Aiffel_minitone/assets/74895635/be588374-42c9-42b4-a1d4-11554b345d1d)
        
    - 주말의 데이터만 사용
        
       ![Untitled (8)](https://github.com/sungwo101/Aiffel_minitone/assets/74895635/dc30b99f-0743-4bde-9d43-526f9d46135c)
        
    
    → 가설과 달리 태양광 발전기를 보유하고 있는 건물의 변화치가 더 높았다
    
- 건물 용도별로 나눴으니 전기 사용 추세가 비슷할 것, 대부분의 건물에서 온도가 올라감에 따라 전력사용량이 많아짐을 확인 → 태양광의 유무를 나뉘어 온도에 따른 변화치를 보았을 때 태양광이 효과가 있다면 전력사용량의 변화치가 완만할 것으로 예상

##### 결론

- 분명 태양광의 효과가 있다고 보여지는 건물의 데이터들이 존재하지만 전체적으로 보았을 때는 현재 주어진 데이터로는 판별하기에 부족하다고 판단됨
- 이유 : 태양광의 크기나, 효율, 건물들의 특성 등 가설에 포함되는 여러가지 요소들이 존재하는데 태양광 발전기의 유무, 일조량 정도의 피쳐로는 가설을 검증하기에는 피쳐 수가 부족하다

### 가설 3 :  비전력 냉방기의 사용이 전력 소모 감소의 효과가 있다.

#### EDA를 통한 가설 검증

- 비전력 냉방기가 효과가 있다면 냉방 사용량과 관계있는 온도, 습도 등의 상관 관계가 감소할 것이다.
##### 상관 관계 분석

- 비전력 냉방기 사용이 전기 사용량에 영향을 미칠지 확인
    - 비전력 냉방기 보유여부간 일평균 온도, 전력 사용량간의 상관계수
        
        ![Untitled (9)](https://github.com/sungwo101/Aiffel_minitone/assets/74895635/e4e1b7da-a8f7-4108-b7f5-aecd8cbab3e2)
        
    - **분석 시각화 : 비전력 냉방기 유무에 따른 피쳐별 상관 관계**
        - 클러스터 간 비전력 냉방시 사용 여부에 따른 피쳐 요소
            
            ![Untitled (10)](https://github.com/sungwo101/Aiffel_minitone/assets/74895635/fb755d25-e756-4018-bf03-78285561b544)
            
    - **분석 : 일평균 온도, 습도에 따른 일평균 전력의 상관 관계**
        - 비전력 냉방기 사용 집단과 비사용 집단의 일평균 온도에 따른 일평균 전력에  상관 관계(스피어 계수 값) 확인
            
            ![Untitled (11)](https://github.com/sungwo101/Aiffel_minitone/assets/74895635/b393fbf3-e3f3-463b-83a0-6ddabdc31721)
            
            → cluster3과 같이 비전력 냉방기를 보유하고 있는 건물이 없는 경우를 제외
            
            → cluster5를 제외하고는 비전력 냉방기를 보유하고 있는 건물이 아닌 건물들 보다 일평균 온도와 일평균 전력 사용량의 상관계수가  높다.
            
            → cluster3, 5를 제외하고는 가설과 반대되는 양상을 보인다.
            
        - 비전력 냉방기 사용 집단과 비사용 집단의 일평균 습도에 따른 일평균 전력에  상관 관계(스피어 계수 값) 확인
            
            ![Untitled (12)](https://github.com/sungwo101/Aiffel_minitone/assets/74895635/64eeacc7-b608-4e85-b9a0-a2f861cda43c)
            
            → cluster3과 같이 비전력 냉방기를 보유하고 있는 건물이 없는 경우를 제외
            
            → cluster3을 제외하고는 모두 가설과 반대되는 양상을 보인다.
            
- **환경적인 불쾌지수 지표 사용**
    - 기온, 풍속, 습도, 강수량, 일조의 변수를 모두 사용하여 환경적인 불쾌지수라는 새로운 지표 생성
    - 클러스터마다의 불쾌지수별 전기 사용량
        
        ![Untitled (13)](https://github.com/sungwo101/Aiffel_minitone/assets/74895635/1a29e099-e1c8-4c54-baac-ee7be6761524)
        
    
    → 아닌 건물들도 존재하지만 대부분의 건물들이 환경적 불쾌지수의 단계가 높아질수록 전력 소비량이 많아짐을 확인할 수 있다.
    
    - 비전력 냉방기 보유여부간 환경적인 불쾌지수와 일평균 전력의 상관계수
        
        ![Untitled (14)](https://github.com/sungwo101/Aiffel_minitone/assets/74895635/17b23264-c0f6-4c5f-ae9d-95f2ed06d64d)
        

### 결론

- 태양광 가설보다 어느정도 상관관계가 있다는 것을 확인할 수 있었지만 여전히 태양광 가설때와 같은 아쉬운 점이 있다.  단지 비전력 냉방기의 유무가 아닌 비전력 냉방기의 개수나 성능 전력냉방기의 개수 등 다른 요인의 피쳐가 있어야 더 정확한 분석이 가능할 것이라고 생각된다.
